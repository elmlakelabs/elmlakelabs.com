---
const solutions = [
  {
    number: '01',
    title: 'GPS Guidance & Auto-Steer',
    description: 'Sub-inch precision guidance systems that reduce overlap, save fuel, and let you work in any conditions—day or night, dust or fog.',
    link: '#products',
    linkText: 'View Systems',
    featured: true,
    color: 'magenta',
    icon: `<svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="1.5">
      <circle cx="24" cy="24" r="20"/>
      <circle cx="24" cy="24" r="8"/>
      <path d="M24 4v8M24 36v8M4 24h8M36 24h8"/>
      <path d="M25 25l15 15M80 80l15 15M25 95l15-15M80 40l15-15"/>
    </svg>`
  },
  {
    number: '02',
    title: 'Land Leveling',
    description: '3D laser and GPS-based leveling systems for perfect field grades, improved drainage, and maximum water efficiency.',
    link: '#products',
    linkText: 'Explore',
    color: 'purple',
    icon: `<svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="1.5">
      <rect x="8" y="8" width="32" height="32" rx="4"/>
      <path d="M8 16h32M16 16v24M32 16v24"/>
      <circle cx="24" cy="28" r="4"/>
    </svg>`
  },
  {
    number: '03',
    title: 'Farm Management Software',
    description: 'Blossom: comprehensive field records, nutrient tracking, pest management, and harvest data—all in one powerful platform.',
    link: '#software',
    linkText: 'Learn More',
    color: 'blue',
    icon: `<svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="1.5">
      <path d="M8 40V20l16-12 16 12v20"/>
      <path d="M18 40V28h12v12"/>
      <path d="M4 44h40"/>
    </svg>`
  },
  {
    number: '04',
    title: 'Expert Consultation',
    description: 'Personalized guidance from precision ag specialists who understand your operation and help you maximize your technology investment.',
    link: '#about',
    linkText: 'Contact Us',
    color: 'cyan',
    icon: `<svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="1.5">
      <path d="M24 4l4 8h8l-6 6 2 8-8-4-8 4 2-8-6-6h8z"/>
      <circle cx="24" cy="36" r="8"/>
      <path d="M24 32v8M20 36h8"/>
    </svg>`
  }
];

const colorMap: Record<string, string> = {
  magenta: 'var(--brand-magenta)',
  purple: 'var(--brand-purple)',
  blue: 'var(--brand-blue)',
  cyan: 'var(--brand-cyan)'
};
---

<section id="solutions" class="py-24 px-4 md:px-8 relative overflow-hidden">
  <!-- Background -->
  <div class="absolute inset-0 molecular-bg opacity-30"></div>

  <div class="relative max-w-[1400px] mx-auto">
    <div class="text-center mb-16">
      <span class="section-tag">What We Do</span>
      <h2 class="section-title">Precision Solutions for<br class="hidden sm:block" />Modern Agriculture</h2>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5">
      {solutions.map((solution, index) => (
        <div
          class:list={[
            'will-animate card p-6 relative overflow-hidden group',
            solution.featured && 'lg:col-span-2'
          ]}
          style={`transition-delay: ${index * 100}ms`}
        >
          <!-- Top accent line -->
          <div
            class="absolute top-0 left-0 right-0 h-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300"
            style={`background: linear-gradient(90deg, ${colorMap[solution.color]}, transparent);`}
          ></div>

          <div class="flex items-start justify-between mb-4">
            <span class="text-xs text-[var(--text-muted)] font-mono">{solution.number}</span>
            <div class="w-10 h-10" style={`color: ${colorMap[solution.color]};`} set:html={solution.icon}></div>
          </div>

          <h3 class="font-display text-xl text-[var(--text-primary)] mb-3">{solution.title}</h3>

          <p class="text-sm text-[var(--text-secondary)] leading-relaxed mb-5">{solution.description}</p>

          <a
            href={solution.link}
            class="inline-flex items-center gap-2 text-sm font-medium transition-colors"
            style={`color: ${colorMap[solution.color]};`}
          >
            {solution.linkText}
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </a>
        </div>
      ))}
    </div>
  </div>
</section>
